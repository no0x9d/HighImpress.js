<script src="../../marked/lib/marked.js"></script>

<script>
    (function (window) {
        'use strict';

        var hi = window.HighImpress;

        hi(function () {
            if (typeof (marked) === "function") {
                //get all HTML elements with a data-markdown attribute
                let elements = hi.$$('[data-markdown]');

                //set inner HTML to parsed markdown structure
                for (let i = 0; i < elements.length; i++) {
                    elements[i].innerHTML = marked(elements[i].innerHTML);
                }
            }
        })
    })(window)
</script>